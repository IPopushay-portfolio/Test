# Проект - "Сеть по продаже электроники"

## Описание
Веб-приложение с API-интерфейсом и админ-панелью для управления иерархической структурой сети по продаже 
электроники. Система построена на Django с использованием миграций для создания базы данных.

## Структура сети
Сеть представляет собой иерархическую структуру из трех уровней:
- Завод (уровень 0)
- Розничная сеть
- Индивидуальный предприниматель

Каждое звено сети ссылается только на одного поставщика оборудования. 
Уровень иерархии определяется отношением к остальным элементам сети: завод всегда находится на уровне 0, 
а если розничная сеть относится напрямую к заводу, минуя остальные звенья, её уровень — 1.

## Модели данных
- Supplier (Поставщик)
Типы: завод, розничная сеть, индивидуальный предприниматель
Иерархическая структура с поставщиками
Контактная информация и задолженность

 - Product (Продукт)
Информация о продуктах электроники
Связь с поставщиком

 - CustomUser (Пользователь)
# Роли: обычный пользователь, активный сотрудник
Доступ к API только для активных сотрудников

# Права доступа
Активные сотрудники могут:
 - Получать доступ к API
 - Управлять звеньями сети
 - Просматривать и редактировать продукты
 - Фильтровать объекты по стране

Администраторы могут:
 - Управлять всеми объектами через админ-панель
 - Очищать задолженность перед поставщиком
 - Просматривать иерархию сети

## Административная панель
- Вывод созданных объектов сети
- На странице объекта сети:
  - Ссылка на «Поставщика»
  - Фильтр по названию города
  - Admin action, очищающий задолженность перед поставщиком у выбранных объектов

## API (Django Rest Framework)
- CRUD операции для модели поставщика, пользователя
- Запрет на обновление поля «Задолженность перед поставщиком» через API
- Фильтрация объектов по определенной стране
- Доступ к API только для активных сотрудников

## Структура проекта

Test/
│
├── config/                       # Основной проект Django
│   ├── __init__.py
│   ├── settings.py               # Настройки проекта
│   ├── urls.py                   # Основные URL проекта
│   ├── asgi.py
│   └── wsgi.py
│
├── chain/                        # Приложение для управления сетью
│   ├── migrations/               # Миграции базы данных
│   ├── __init__.py
│   ├── admin.py                  # Настройки админ-панели
│   ├── apps.py
│   ├── models.py                 # Модели данных
│   ├── permissions.py            # Права доступа к API
│   ├── serializers.py            # Сериализаторы для API
│   ├── views.py                  # Представления API
│   ├── filters.py                # Фильтры для API
│   └── urls.py                   # URL для API
│
├── users/                        # Приложение для управления пользователями
│   ├── migrations/               # Миграции базы данных
│   ├── __init__.py
│   ├── admin.py                  # Настройки админ-панели
│   ├── apps.py
│   ├── models.py                 # Модель пользователя
│   ├── serializers.py            # Сериализаторы для API
│   └── views.py                  # Представления API
│
├── manage.py                     # Скрипт управления Django
├── pyproject.toml                # Зависимости проекта
├── Dockerfile                    # Конфигурация Docker
└── docker-compose.yml            # Конфигурация Docker Compose


## Установка и настройка проекта:
1. Создание проекта и виртуального окружения
   # Активация виртуального окружения Poetry
     - poetry shell
   
2. Установка зависимостей
   # Установка Django
     - poetry add django
   # Установка PostgreSQL
     - poetry add psycopg2-binary   
   # Установка библиотеки для работы с переменными окружения
     - poetry add python-dotenv  

## Разработка
- Создание новых миграций
poetry run python manage.py makemigrations

- Применение миграций
poetry run python manage.py migrate

- Запуск сервера разработки
poetry run python manage.py runserver

# Запуск через Docker
- Сборка и запуск
docker-compose up --build

- Создание миграций
docker-compose run web python manage.py makemigrations

- Применение миграций
docker-compose run web python manage.py migrate

- Создание суперпользователя
docker-compose run web python manage.py createsuperuser

 
## Проверка API через Swagger доступно по адресу: http://localhost:8000/swagger/

## Документация:
Дополнительную информацию о структуре проекта и API можно найти в документации Swagger 
или в README.md файле проекта.

## Лицензия: 
Проект распространяется под лицензией MIT.
